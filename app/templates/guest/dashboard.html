{% extends 'base.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboards.css') }}">
<div class="guest-dashboard container">
    <div class="welcome-header">
        <div>
            <h2>Welcome Back</h2>
            <p style="color:#7f8c8d; margin-bottom:0;">Ready for another memorable stay?</p>
        </div>
        <button onclick="document.getElementById('rooms-section').scrollIntoView({behavior: 'smooth'})" class="btn btn-accent">Find a Room</button>
    </div>
    
    <!-- My Bookings Section -->
    <div class="mb-4">
        <h3>My Upcoming Stays</h3>
        <div id="my-bookings" class="booking-track">
            <p style="padding: 1rem; color: #95a5a6;">Loading bookings...</p>
        </div>
    </div>

    <!-- Available Rooms Section -->
    <div id="rooms-section" class="mb-4" style="margin-top: 4rem;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 2rem;">
             <h3>Available Experiences</h3>
             <div class="filters">
                 <select id="type-filter" class="form-control" style="width: 150px; display:inline-block;">
                     <option value="">All Types</option>
                     <option value="Single">Single</option>
                     <option value="Double">Double</option>
                     <option value="Suite">Suite</option>
                 </select>
                 <select id="price-filter" class="form-control" style="width: 150px; display:inline-block;">
                     <option value="">Max Price</option>
                     <option value="5000">< ₹5,000</option>
                     <option value="10000">< ₹10,000</option>
                     <option value="20000">< ₹20,000</option>
                 </select>
                 <button id="filter-btn" class="btn btn-primary">Filter</button>
             </div>
        </div>
        <div id="rooms-list" class="card-grid" style="margin-top: 1rem;">
            <!-- Modern Cards injected by JS -->
        </div>
    </div>
</div>

<!-- Booking Modal -->
<div id="booking-modal" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:flex; justify-content:center; align-items:center; z-index:2000;">
    <div class="form-container" style="width: 400px; margin:0;">
        <h3>Book Room</h3>
        <p>Room ID: <span id="modal-room-id"></span></p>
        <p>Price: ₹<span id="modal-room-price"></span></p>
        <div class="form-group">
            <label>Check-in Date</label>
            <input type="date" id="checkin-date" class="form-control" required>
        </div>
        <div class="form-group">
            <label>Check-out Date</label>
            <input type="date" id="checkout-date" class="form-control" required>
        </div>
        <div style="text-align:right;">
             <button class="btn btn-primary" id="confirm-booking-btn">Confirm</button>
             <button class="btn btn-accent" onclick="document.getElementById('booking-modal').style.display='none'">Cancel</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/guest.js') }}?v=2"></script>
{% endblock %}
